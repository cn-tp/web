import{r as _}from"./user.f370ff63.js";import{Z as P,h as b,j as n,k as V,x as o,y as l,a5 as r,B as x,q as y,E as u,D as v}from"./vendor.a22db959.js";import{S as j,L as k,r as q}from"./index.6b1aa83f.js";const C={class:"app-container"},I=y("\u4FEE\u6539"),U={setup(S){const{proxy:i}=v(),w=P(),e=b({form:{oldPassword:"",newPassword:"",newPassword2:""},rules:{oldPassword:[{required:!0,message:"\u8BF7\u8F93\u5165\u65E7\u5BC6\u7801",trigger:"blur"},{min:6,message:"\u957F\u5EA6\u5927\u4E8E6\u4E2A\u5B57\u7B26",trigger:"blur"}],newPassword:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",trigger:"blur"},{min:6,message:"\u957F\u5EA6\u5927\u4E8E6\u4E2A\u5B57\u7B26",trigger:"blur"}],newPassword2:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801",trigger:"blur"},{min:6,message:"\u957F\u5EA6\u5927\u4E8E6\u4E2A\u5B57\u7B26",trigger:"blur"}]}});function f(){i.$refs.form.validate(m=>{if(m){if(e.form.newPassword!==e.form.newPassword2){u.success("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4");return}_({uid:parseInt(window.localStorage.getItem("userId")||""),old:e.form.oldPassword,new:e.form.newPassword}).then(s=>{s&&s.code===200?(u.success("\u4FEE\u6539\u6210\u529F"),j.clear(),k.clear(),q(),w.push("/login")):u.success("code:"+s.code+";"+s.message)})}})}return(m,s)=>{const d=n("el-input"),t=n("el-form-item"),p=n("el-button"),c=n("el-form");return x(),V("div",C,[o(c,{ref:(a,g)=>{g.form=a},"status-icon":"",model:r(e).form,rules:r(e).rules,"label-width":"180px",style:{width:"500px"}},{default:l(()=>[o(t,{label:"\u65E7\u5BC6\u7801",prop:"oldPassword"},{default:l(()=>[o(d,{modelValue:r(e).form.oldPassword,"onUpdate:modelValue":s[0]||(s[0]=a=>r(e).form.oldPassword=a),type:"password",clearable:""},null,8,["modelValue"])]),_:1}),o(t,{label:"\u65B0\u5BC6\u7801",prop:"newPassword"},{default:l(()=>[o(d,{modelValue:r(e).form.newPassword,"onUpdate:modelValue":s[1]||(s[1]=a=>r(e).form.newPassword=a),type:"password",clearable:""},null,8,["modelValue"])]),_:1}),o(t,{label:"\u518D\u6B21\u786E\u8BA4\u65B0\u5BC6\u7801",prop:"newPassword2"},{default:l(()=>[o(d,{modelValue:r(e).form.newPassword2,"onUpdate:modelValue":s[2]||(s[2]=a=>r(e).form.newPassword2=a),type:"password",clearable:""},null,8,["modelValue"])]),_:1}),o(t,null,{default:l(()=>[o(p,{type:"primary",onClick:f},{default:l(()=>[I]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}};export{U as default};
