import W from"./addLocation.5b6510d1.js";import{h as Z,Z as G,o as K,j as s,a4 as Q,k as b,l as N,x as o,y as n,a5 as l,w as X,O as f,J as Y,B as u,W as h,U as x,s as k,q as g,E as w,D as ee}from"./vendor.a22db959.js";import{p as ae}from"./printer.32c834d5.js";import{c as te,a as oe,d as le,u as ne}from"./index.70831d5c.js";import{_ as ie}from"./index.465eb10d.js";const re=g("\u641C\u7D22"),se=g("\u65B0\u589E"),ue=g("\u4FEE\u6539"),de=g("\u6253\u5370"),me={footer:"",class:"dialog_footer"},pe=g("\u53D6 \u6D88"),ce=g("\u786E \u5B9A"),fe={setup(ge){const{proxy:V}=ee(),e=Z({drawer:!1,seachField:{locationNo:"",locationName:"",status:""},tableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},formData:{id:"",locationNo:"",locationName:"",locationDescription:"",locationType:0,locationOwner:0,locationFloor:"",locationBlockNumber:0,memo:"",status:"",coperationId:"",moperationId:"",ctime:"",mtime:""},rules:{locationNo:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E93\u4F4D\u7F16\u53F7",trigger:"blur"}],locationName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5E93\u4F4D\u540D\u79F0",trigger:"blur"}]},canDialogDetail:!1,statusList:[],locationOwnerList:[]});G();function C(i){e.tableData.pagination.pageSize=i,p()}function F(i){e.tableData.pagination.pageNum=i,p()}function z(){e.tableData.pagination.pageNum=1,p()}function p(){e.tableData.loading=!0,te({locationNo:e.seachField.locationNo,locationName:e.seachField.locationName,status:e.seachField.status,pageSize:e.tableData.pagination.pageSize,pageNum:e.tableData.pagination.pageNum}).then(i=>{e.tableData.rows=i.items?i.items:[],e.tableData.pagination.totalPage=i.totalPage,e.tableData.loading=!1}).catch(i=>{console.log(i)})}function U(){return"padding:3px;"}function O(){return"padding:3px;"}function I(i,a){e.formData.id&&V.$refs.ruleForm.resetFields(),le({id:a.id}).then(r=>{e.formData=r,console.log(e.formData),e.canDialogDetail=!0}).catch(r=>{console.log(r)})}function S(){console.log(V),V.$refs.ruleForm.validate().then(i=>{i&&ne(e.formData).then(()=>{w.success("\u4FEE\u6539\u6210\u529F"),e.canDialogDetail=!1,p()}).catch(()=>{w.error("\u64CD\u4F5C\u5931\u8D25")})})}function B(i){p(),i()}function $(i){for(let a=0;a<e.statusList.length;a++)if(i==e.statusList[a].itemId)return e.statusList[a].itemName;return""}function P(i){for(let a=0;a<e.locationOwnerList.length;a++)if(i==e.locationOwnerList[a].itemId)return e.locationOwnerList[a].itemName;return""}function L(i){oe({groupId:i}).then(a=>{a.items&&a.items.length>0&&(i==1?e.statusList=a.items:i==19&&(e.locationOwnerList=a.items))}).catch(a=>{console.log(a)})}function j(i,a){if(!a.locationNo){w.warning("\u5E93\u4F4D\u53F7\u672A\u586B\u5199\uFF0C\u53D6\u6D88\u6253\u5370");return}ae({templateId:2,params:{locationNo:a.locationNo}}).then(r=>{w.success("\u5DF2\u53D1\u9001\u6253\u5370")}).catch(r=>{console.log(r)})}return K(()=>{p(),L(1),L(19)}),(i,a)=>{const r=s("el-input"),_=s("el-col"),v=s("el-option"),y=s("el-select"),c=s("el-button"),A=s("el-row"),d=s("el-table-column"),T=s("el-table"),E=s("el-empty"),q=s("el-pagination"),m=s("el-form-item"),R=s("el-form"),H=s("el-dialog"),M=s("el-drawer"),J=Q("loading");return u(),b("div",null,[N("div",null,[o(A,{gutter:20},{default:n(()=>[o(_,{span:4},{default:n(()=>[o(r,{modelValue:l(e).seachField.locationNo,"onUpdate:modelValue":a[0]||(a[0]=t=>l(e).seachField.locationNo=t),placeholder:"\u5E93\u4F4D\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),o(_,{span:4},{default:n(()=>[o(r,{modelValue:l(e).seachField.locationName,"onUpdate:modelValue":a[1]||(a[1]=t=>l(e).seachField.locationName=t),placeholder:"\u5E93\u4F4D\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),o(_,{span:4},{default:n(()=>[o(y,{modelValue:l(e).seachField.status,"onUpdate:modelValue":a[2]||(a[2]=t=>l(e).seachField.status=t),placeholder:"\u5E93\u4F4D\u72B6\u6001",size:"small",clearable:""},{default:n(()=>[(u(!0),b(h,null,x(l(e).statusList,t=>(u(),f(v,{label:t.itemName,value:t.itemId},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),o(_,{span:2},{default:n(()=>[o(c,{type:"primary",onClick:a[3]||(a[3]=t=>z()),size:"small"},{default:n(()=>[re]),_:1})]),_:1}),o(_,{span:2},{default:n(()=>[o(c,{type:"primary",onClick:a[4]||(a[4]=t=>l(e).drawer=!0),size:"small"},{default:n(()=>[se]),_:1})]),_:1})]),_:1}),l(e).tableData.rows.length>0?X((u(),f(T,{key:0,data:l(e).tableData.rows,stripe:"","cell-style":U,"header-cell-style":O,border:"",class:"container_table"},{default:n(()=>[o(d,{label:"#",prop:"id",width:"50"}),o(d,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationNo"}),o(d,{label:"\u5E93\u4F4D\u540D\u79F0",prop:"locationName",width:"120"}),o(d,{label:"\u697C\u53F7",prop:"locationBlockNumber",width:"100"}),o(d,{label:"\u697C\u5C42",prop:"locationFloor",width:"100"}),o(d,{label:"\u5E93\u4F4D\u63CF\u8FF0",prop:"locationDescription",width:"120"}),o(d,{label:"\u5E93\u4F4D\u6240\u5C5E",prop:"locationOwner"},{default:n(t=>[N("div",null,k(P(t.row.locationOwner)),1)]),_:1}),o(d,{label:"\u5E93\u4F4D\u72B6\u6001",prop:"status",width:"100"},{default:n(t=>[N("div",null,k($(t.row.status)),1)]),_:1}),o(d,{label:"\u64CD\u4F5C",width:"120"},{default:n(t=>[o(c,{type:"text",onClick:D=>I(t.$index,t.row),size:"mini"},{default:n(()=>[ue]),_:2},1032,["onClick"]),o(c,{type:"text",onClick:D=>j(t.$index,t.row),size:"mini"},{default:n(()=>[de]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[J,l(e).tableData.loading]]):(u(),f(E,{key:1,description:"\u6682\u65E0\u6570\u636E"})),l(e).tableData.rows.length>0?(u(),f(q,{key:2,currentPage:l(e).tableData.pagination.pageNum,"onUpdate:currentPage":a[5]||(a[5]=t=>l(e).tableData.pagination.pageNum=t),"page-size":l(e).tableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:F,onSizeChange:C,"page-count":l(e).tableData.pagination.totalPage},null,8,["currentPage","page-size","page-count"])):Y("",!0),o(H,{title:"\u4FEE\u6539\u5E93\u4F4D\u4FE1\u606F",modelValue:l(e).canDialogDetail,"onUpdate:modelValue":a[16]||(a[16]=t=>l(e).canDialogDetail=t),center:"",width:"30%"},{default:n(()=>[o(R,{ref:(t,D)=>{D.ruleForm=t},model:l(e).formData,rules:l(e).rules,size:"mini","label-width":"100px"},{default:n(()=>[o(m,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationNo"},{default:n(()=>[o(r,{modelValue:l(e).formData.locationNo,"onUpdate:modelValue":a[6]||(a[6]=t=>l(e).formData.locationNo=t)},null,8,["modelValue"])]),_:1}),o(m,{label:"\u5E93\u4F4D\u540D\u79F0",prop:"locationName"},{default:n(()=>[o(r,{modelValue:l(e).formData.locationName,"onUpdate:modelValue":a[7]||(a[7]=t=>l(e).formData.locationName=t)},null,8,["modelValue"])]),_:1}),o(m,{label:"\u5E93\u4F4D\u63CF\u8FF0",prop:"locationDescription"},{default:n(()=>[o(r,{modelValue:l(e).formData.locationDescription,"onUpdate:modelValue":a[8]||(a[8]=t=>l(e).formData.locationDescription=t)},null,8,["modelValue"])]),_:1}),o(m,{label:"\u5E93\u4F4D\u6240\u5C5E",prop:"locationOwner"},{default:n(()=>[o(y,{modelValue:l(e).formData.locationOwner,"onUpdate:modelValue":a[9]||(a[9]=t=>l(e).formData.locationOwner=t),size:"small",clearable:""},{default:n(()=>[(u(!0),b(h,null,x(l(e).locationOwnerList,t=>(u(),f(v,{label:t.itemName,value:t.itemId},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),o(m,{label:"\u697C\u5C42",prop:"locationFloor"},{default:n(()=>[o(r,{modelValue:l(e).formData.locationFloor,"onUpdate:modelValue":a[10]||(a[10]=t=>l(e).formData.locationFloor=t)},null,8,["modelValue"])]),_:1}),o(m,{label:"\u697C\u53F7",prop:"locationBlockNumber"},{default:n(()=>[o(r,{modelValue:l(e).formData.locationBlockNumber,"onUpdate:modelValue":a[11]||(a[11]=t=>l(e).formData.locationBlockNumber=t)},null,8,["modelValue"])]),_:1}),o(m,{label:"\u5907\u6CE8",prop:"memo"},{default:n(()=>[o(r,{modelValue:l(e).formData.memo,"onUpdate:modelValue":a[12]||(a[12]=t=>l(e).formData.memo=t)},null,8,["modelValue"])]),_:1}),o(m,{label:"\u5E93\u4F4D\u72B6\u6001",prop:"status"},{default:n(()=>[o(y,{modelValue:l(e).formData.status,"onUpdate:modelValue":a[13]||(a[13]=t=>l(e).formData.status=t),size:"small"},{default:n(()=>[(u(!0),b(h,null,x(l(e).statusList,t=>(u(),f(v,{label:t.itemName,value:t.itemId},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),N("span",me,[o(c,{onClick:a[14]||(a[14]=t=>l(e).canDialogDetail=!1)},{default:n(()=>[pe]),_:1}),o(c,{type:"primary",onClick:a[15]||(a[15]=t=>S())},{default:n(()=>[ce]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),o(M,{title:"\u65B0\u589E\u5E93\u4F4D",modelValue:l(e).drawer,"onUpdate:modelValue":a[17]||(a[17]=t=>l(e).drawer=t),"destroy-on-close":!0,"custom-class":"drawer",ref:(t,D)=>{D.drawer=t},"close-on-press-escape":!0,"before-close":B},{default:n(()=>[o(W)]),_:1},8,["modelValue"])])}}};var Ve=ie(fe,[["__scopeId","data-v-a7f40b90"]]);export{Ve as default};
