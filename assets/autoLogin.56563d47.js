import{K as l,h as f,$ as m,o as _,j as I,B as g,E as v,D as p,a8 as h}from"./vendor.8327e786.js";import{j as w,b as S}from"./user.afc1ef84.js";import{_ as k,S as x,c as y}from"./index.10c62aa1.js";const C={class:"error"},j=h('<div class="error-flex" data-v-2fd9d1e7><div class="left" data-v-2fd9d1e7><div class="left-item" data-v-2fd9d1e7><div class="left-item-animation left-item-num" data-v-2fd9d1e7>Loading</div><div class="left-item-animation left-item-title" data-v-2fd9d1e7>\u8DF3 \u8F6C \u767B \u5F55 \u4E2D ......</div></div></div></div>',1),B=[j],E={setup(N){const{proxy:n}=p(),i=l(),t=f({userId:parseInt(i.query.userId)}),s=m();function d(){w({uid:t.userId}).then(e=>{x.set("token",e.jwt),window.localStorage.setItem("token",e.jwt),window.localStorage.setItem("eqRoles",JSON.stringify(e.roles)),window.localStorage.setItem("oid",e.orgId),r(t.userId)}).catch(()=>{a()})}function r(e){S({userId:e}).then(o=>{window.localStorage.setItem("userName",o.userName),window.localStorage.setItem("userId",o.userId),y(),c()}).catch(()=>{a()})}function c(){s.push("/"),setTimeout(()=>{n.mittBus.emit("onSignInClick")},300)}function a(){s.push("/login"),v.error("\u672A\u6CE8\u518C\u7528\u6237\u4E0D\u80FD\u767B\u5F55")}function u(){t.userId?d():s.push("/login")}return _(()=>{u()}),(e,o)=>(g(),I("div",C,B))}};var F=k(E,[["__scopeId","data-v-2fd9d1e7"]]);export{F as default};
