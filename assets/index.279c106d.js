import{h as K,Z as X,o as Y,j as d,a4 as ee,k as D,l as N,x as l,y as n,a5 as o,w as ae,O as u,J as y,B as s,W as h,U as w,s as I,q as f,E as g}from"./vendor.a22db959.js";import te from"./addTakeStock.135f564a.js";import{b as le,O as oe,a as ne,Q as ie,R as re,S as se,T as de,U as ue}from"./index.d0f5265b.js";import{_ as me}from"./index.6b1aa83f.js";const pe=f("\u641C\u7D22"),ce=f("\u65B0\u589E"),fe=f("\u63D0\u4EA4"),ke=f("\u53D6\u6D88"),_e=f("\u7F16\u8F91"),ge=f("\u6DFB\u52A0\u5E93\u4F4D"),be=f("\u5B8C\u6210\u76D8\u70B9"),De={footer:"",class:"dialog_footer"},ye=f("\u53D6 \u6D88"),Se=f("\u786E \u5B9A"),he={setup(we){const a=K({drawer:!1,seachField:{takeName:"",status:"",operator:"",takeStockType:""},tableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},formData:{id:0,roleId:4,operator:0,takeStockType:0,taskName:"",memo:"",detail:{locationId:""}},rules:{locationNo:[{required:!0,message:"\u8BF7\u8F93\u5165Sku\u7F16\u53F7",trigger:"blur"}],locationName:[{required:!0,message:"\u8BF7\u8F93\u5165Sku\u540D\u79F0",trigger:"blur"}]},canDialogDetail:!1,canDialogDetailLocation:!1,takeStockInfoTypeList:[],takeStockInfoStatusList:[],userList:[]});function T(){le({id:a.formData.roleId}).then(i=>{i&&i.code===200&&(a.userList=i.items)})}const C=X();function z(i){a.tableData.pagination.pageSize=i,p()}function L(i){a.tableData.pagination.pageNum=i,p()}function F(){a.tableData.pagination.pageNum=1,p()}function U(i,t){ie({id:t.id}).then(r=>{r&&r.code==200?g.success("\u63D0\u4EA4\u6210\u529F"):g.error("\u63D0\u4EA4\u5931\u8D25"),p()})}function $(i,t){re({id:t.id}).then(r=>{r&&r.code==200?g.success("\u63D0\u4EA4\u6210\u529F"):g.error("\u63D0\u4EA4\u5931\u8D25"),p()})}function A(i,t){C.push({path:"/takeStockDetail/add",query:{taskId:t.id}})}function P(i,t){a.canDialogDetail=!0,se({id:t.id}).then(r=>{r&&r.code==200&&(a.formData.operator=r.data.operator,a.formData.takeStockType=r.data.takeStockType,a.formData.taskName=r.data.taskName,a.formData.id=r.data.id,a.formData.memo=r.data.memo)})}function j(){de({id:a.formData.id,taskName:a.formData.taskName,takeStockType:a.formData.takeStockType,operator:a.formData.operator,memo:a.formData.memo}).then(i=>{i&&i.code==200?g.success("\u53D6\u6D88\u6210\u529F"):g.error("\u53D6\u6D88\u5931\u8D25"),a.canDialogDetail=!1,p()})}function B(i,t){ue({id:t.id}).then(r=>{r&&r.code==200?g.success("\u53D6\u6D88\u6210\u529F"):g.error("\u53D6\u6D88\u5931\u8D25"),p()}).catch(r=>{console.log(r)})}function p(){a.tableData.loading=!0,oe({takeName:a.seachField.takeName,status:a.seachField.status,operator:a.seachField.operator,takeStockType:a.seachField.takeStockType,pageSize:a.tableData.pagination.pageSize,pageNum:a.tableData.pagination.pageNum}).then(i=>{a.tableData.rows=i.items?i.items:[],a.tableData.pagination.totalPage=i.totalPage,a.tableData.loading=!1}).catch(i=>{console.log(i)})}function E(i){p(),i()}function q(){return"padding:3px;"}function O(){return"padding:3px;"}function V(i,t){var r=[];switch(t){case 18:r=a.takeStockInfoTypeList;break;case 16:r=a.takeStockInfoStatusList;break}for(let m=0;m<r.length;m++)if(i==r[m].itemId)return r[m].itemName;return""}function x(i){ne({groupId:i}).then(t=>{if(t.code==200&&t.items.length>0)switch(i){case 18:a.takeStockInfoTypeList=t.items;break;case 16:a.takeStockInfoStatusList=t.items;break}}).catch(t=>{console.log(t)})}return Y(()=>{T(),p(),x(16),x(18)}),(i,t)=>{const r=d("el-input"),m=d("el-col"),b=d("el-option"),S=d("el-select"),c=d("el-button"),H=d("el-row"),k=d("el-table-column"),M=d("el-table"),R=d("el-empty"),J=d("el-pagination"),v=d("el-form-item"),Q=d("el-form"),W=d("el-dialog"),Z=d("el-drawer"),G=ee("loading");return s(),D("div",null,[N("div",null,[l(H,{gutter:20},{default:n(()=>[l(m,{span:4},{default:n(()=>[l(r,{modelValue:o(a).seachField.takeName,"onUpdate:modelValue":t[0]||(t[0]=e=>o(a).seachField.takeName=e),placeholder:"\u4EFB\u52A1\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),l(m,{span:4},{default:n(()=>[l(S,{modelValue:o(a).seachField.takeStockType,"onUpdate:modelValue":t[1]||(t[1]=e=>o(a).seachField.takeStockType=e),placeholder:"\u76D8\u70B9\u7C7B\u578B",size:"small",clearable:""},{default:n(()=>[l(b,{label:"\u6240\u6709",value:"0"}),(s(!0),D(h,null,w(o(a).takeStockInfoTypeList,e=>(s(),u(b,{label:e.itemName,value:e.itemId,key:e.spuId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{span:4},{default:n(()=>[l(S,{modelValue:o(a).seachField.operator,"onUpdate:modelValue":t[2]||(t[2]=e=>o(a).seachField.operator=e),placeholder:"\u64CD\u4F5C\u4EBA",size:"small",clearable:""},{default:n(()=>[(s(!0),D(h,null,w(o(a).userList,e=>(s(),u(b,{label:e.userName,value:e.id,key:e.itemId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{span:4},{default:n(()=>[l(S,{modelValue:o(a).seachField.status,"onUpdate:modelValue":t[3]||(t[3]=e=>o(a).seachField.status=e),placeholder:"\u72B6\u6001",size:"small",clearable:""},{default:n(()=>[l(b,{label:"\u6240\u6709",value:"0"}),(s(!0),D(h,null,w(o(a).takeStockInfoStatusList,e=>(s(),u(b,{label:e.itemName,value:e.itemId,key:e.spuId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{span:2},{default:n(()=>[l(c,{type:"primary",onClick:t[4]||(t[4]=e=>F()),size:"small"},{default:n(()=>[pe]),_:1})]),_:1}),l(m,{span:2},{default:n(()=>[l(c,{type:"primary",onClick:t[5]||(t[5]=e=>o(a).drawer=!0),size:"small"},{default:n(()=>[ce]),_:1})]),_:1})]),_:1}),o(a).tableData.rows.length>0?ae((s(),u(M,{key:0,data:o(a).tableData.rows,stripe:"","cell-style":q,"header-cell-style":O,border:"",class:"container_table"},{default:n(()=>[l(k,{label:"#",prop:"id",width:"50"}),l(k,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"taskName",width:"200"}),l(k,{label:"\u76D8\u70B9\u7C7B\u578B",prop:"takeStockType",width:"90"},{default:n(e=>[N("div",null,I(V(e.row.takeStockType,18)),1)]),_:1}),l(k,{label:"\u64CD\u4F5C\u4EBA",prop:"operatorName",width:"90"}),l(k,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"ctime",width:"100"}),l(k,{label:"\u72B6\u6001",prop:"status",width:"100"},{default:n(e=>[N("div",null,I(V(e.row.status,16)),1)]),_:1}),l(k,{label:"\u5907\u6CE8",prop:"memo",width:"340"}),l(k,{label:"\u64CD\u4F5C"},{default:n(e=>[e.row.status==10?(s(),u(c,{key:0,type:"text",onClick:_=>$(e.$index,e.row),size:"mini"},{default:n(()=>[fe]),_:2},1032,["onClick"])):y("",!0),e.row.status==10?(s(),u(c,{key:1,type:"text",onClick:_=>B(e.$index,e.row),size:"mini"},{default:n(()=>[ke]),_:2},1032,["onClick"])):y("",!0),e.row.status==10?(s(),u(c,{key:2,type:"text",onClick:_=>P(e.$index,e.row),size:"mini"},{default:n(()=>[_e]),_:2},1032,["onClick"])):y("",!0),e.row.status==10?(s(),u(c,{key:3,type:"text",onClick:_=>A(e.$index,e.row),size:"mini"},{default:n(()=>[ge]),_:2},1032,["onClick"])):y("",!0),e.row.status==20?(s(),u(c,{key:4,type:"text",onClick:_=>U(e.$index,e.row),size:"mini"},{default:n(()=>[be]),_:2},1032,["onClick"])):y("",!0)]),_:1})]),_:1},8,["data"])),[[G,o(a).tableData.loading]]):(s(),u(R,{key:1,description:"\u6682\u65E0\u6570\u636E"})),o(a).tableData.rows.length>0?(s(),u(J,{key:2,currentPage:o(a).tableData.pagination.pageNum,"onUpdate:currentPage":t[6]||(t[6]=e=>o(a).tableData.pagination.pageNum=e),"page-size":o(a).tableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:L,onSizeChange:z,"page-count":o(a).tableData.pagination.totalPage},null,8,["currentPage","page-size","page-count"])):y("",!0),l(W,{title:"\u4FEE\u6539\u4EFB\u52A1",modelValue:o(a).canDialogDetail,"onUpdate:modelValue":t[13]||(t[13]=e=>o(a).canDialogDetail=e),center:"",width:"30%"},{default:n(()=>[l(Q,{ref:(e,_)=>{_.ruleForm=e},model:o(a).formData,rules:o(a).rules,size:"mini","label-width":"100px"},{default:n(()=>[l(v,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"skuNo"},{default:n(()=>[l(r,{modelValue:o(a).formData.taskName,"onUpdate:modelValue":t[7]||(t[7]=e=>o(a).formData.taskName=e)},null,8,["modelValue"])]),_:1}),l(v,{label:"\u76D8\u70B9\u7C7B\u578B",prop:"takeStockType"},{default:n(()=>[l(S,{modelValue:o(a).formData.takeStockType,"onUpdate:modelValue":t[8]||(t[8]=e=>o(a).formData.takeStockType=e),placeholder:"\u76D8\u70B9\u7C7B\u578B",size:"small",clearable:""},{default:n(()=>[(s(!0),D(h,null,w(o(a).takeStockInfoTypeList,e=>(s(),u(b,{label:e.itemName,value:e.itemId,key:e.itemId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(v,{label:"\u64CD\u4F5C\u4EBA\u5458",prop:"Operator"},{default:n(()=>[l(S,{modelValue:o(a).formData.operator,"onUpdate:modelValue":t[9]||(t[9]=e=>o(a).formData.operator=e),placeholder:"\u64CD\u4F5C\u4EBA\u5458",size:"small",clearable:""},{default:n(()=>[(s(!0),D(h,null,w(o(a).userList,e=>(s(),u(b,{label:e.userName,value:e.id,key:e.itemId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(v,{label:"\u5907\u6CE8",prop:"memo"},{default:n(()=>[l(r,{modelValue:o(a).formData.memo,"onUpdate:modelValue":t[10]||(t[10]=e=>o(a).formData.memo=e)},null,8,["modelValue"])]),_:1}),N("span",De,[l(c,{onClick:t[11]||(t[11]=e=>o(a).canDialogDetail=!1)},{default:n(()=>[ye]),_:1}),l(c,{type:"primary",onClick:t[12]||(t[12]=e=>j())},{default:n(()=>[Se]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),l(Z,{title:"\u65B0\u589E\u76D8\u70B9\u4EFB\u52A1",modelValue:o(a).drawer,"onUpdate:modelValue":t[14]||(t[14]=e=>o(a).drawer=e),"destroy-on-close":!0,"custom-class":"drawer",ref:(e,_)=>{_.drawer=e},"close-on-press-escape":!0,"before-close":E},{default:n(()=>[l(te)]),_:1},8,["modelValue"])])}}};var Ie=me(he,[["__scopeId","data-v-6aad3de3"]]);export{Ie as default};
