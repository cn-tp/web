import{h as O,Z as W,K as Z,o as G,j as d,a4 as Q,k as X,x as t,y as n,a5 as l,l as g,B as m,w as P,O as c,s as w,J as S,q as D,E as y}from"./vendor.a22db959.js";import{J as aa,a as ea,D as ta,g as oa,K as la,L as na}from"./index.d0f5265b.js";import{_ as ia}from"./index.6b1aa83f.js";const sa=D("\u5220\u9664"),da=D("\u641C\u7D22"),ra=D("\u6DFB\u52A0"),ua={footer:"",class:"dialog_footer"},pa=D("\u53D6 \u6D88"),ma=D("\u786E \u5B9A"),ca={style:{"margin-top":"10px"}},ga=D("\u65B0\u589E"),fa={setup(Da){const a=O({query:{applyId:0,applyNo:""},seachField:{status:10},tableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},storageTableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},addSkuformData:{count:1,reason:"",userId:parseInt(window.localStorage.getItem("userId")||""),row:{},seachField:{locationNo:"",locationName:"",containerNo:"",spuName:"",spuNo:"",skuName:"",skuDescription:"",status:""}},formData:{applyName:"",auditor:0,expectReturnTime:"",memo:""},rules:{locationNo:[{required:!0,message:"\u8BF7\u8F93\u5165SPU\u7F16\u53F7",trigger:"blur"}],locationName:[{required:!0,message:"\u8BF7\u8F93\u5165SPU\u540D\u79F0",trigger:"blur"}]},canDialogDetail:!1,addSkucanDialogDetail:!1,appleStatusList:[],sysYesNoList:[],statusList:[],unitList:[],containerItemStatus:[],locationTypeList:[],applyInfo:{}});W();const b=Z();function U(i){a.tableData.pagination.pageSize=i,k()}function A(i){a.tableData.pagination.pageNum=i,k()}function q(i){a.storageTableData.pagination.pageSize=i,h()}function $(i){a.storageTableData.pagination.pageNum=i,h()}function k(){a.tableData.loading=!0,aa({id:a.query.applyId,status:a.seachField.status,pageSize:a.tableData.pagination.pageSize,pageNum:a.tableData.pagination.pageNum}).then(i=>{console.log(i),a.tableData.rows=i.items?i.items:[],a.tableData.pagination.totalPage=i.totalPage,a.tableData.loading=!1}).catch(i=>{console.log(i)})}function R(){a.tableData.pagination.pageNum=1,h()}function h(){oa({locationNo:a.addSkuformData.seachField.locationNo,locationName:a.addSkuformData.seachField.locationName,containerNo:a.addSkuformData.seachField.containerNo,spuName:a.addSkuformData.seachField.spuName,spuNo:a.addSkuformData.seachField.spuNo,spuDescription:a.addSkuformData.seachField.spuDescription,spuConsumeRule:a.addSkuformData.seachField.spuConsumeRule,skuName:a.addSkuformData.seachField.skuName,skuDescription:a.addSkuformData.seachField.skuDescription,status:20,pageSize:a.storageTableData.pagination.pageSize,pageNum:a.storageTableData.pagination.pageNum}).then(i=>{a.storageTableData.rows=i.items?i.items:[],a.storageTableData.pagination.totalPage=i.totalPage,a.storageTableData.loading=!1}).catch(i=>{console.log(i)})}function N(){return"padding:3px;"}function v(){return"padding:3px;"}function B(i,e){la({id:e.id}).then(s=>{k(),y.success("\u6210\u529F")}).catch(s=>{console.log(s)})}function I(i,e){var s=[];switch(e){case 9:s=a.statusList;break;case 3:s=a.unitList;break;case 4:s=a.containerItemStatus;break;case 5:s=a.locationTypeList;break;case 10:s=a.sysYesNoList;break}for(let r=0;r<s.length;r++)if(i==s[r].itemId)return s[r].itemName;return""}function f(i){ea({groupId:i}).then(e=>{if(e.code==200&&e.items.length>0)switch(i){case 9:a.statusList=e.items;break;case 3:a.unitList=e.items;break;case 4:a.containerItemStatus=e.items;break;case 5:a.locationTypeList=e.items;break;case 10:a.sysYesNoList=e.items;break}}).catch(e=>{console.log(e)})}function H(){a.canDialogDetail=!0,h()}function j(i,e){a.addSkucanDialogDetail=!0,a.addSkuformData.row=e}function E(){if(console.log(a.addSkuformData.row),a.addSkuformData.count==0){y.warning("\u8BF7\u586B\u5199\u7533\u8BF7\u6570\u91CF");return}na({userId:parseInt(window.localStorage.getItem("userId")||""),sessionId:window.localStorage.getItem("sessionId"),applyId:a.query.applyId*1,applyNo:a.query.applyNo,applyAmount:a.addSkuformData.count*1,applyReason:a.addSkuformData.reason,spuId:a.addSkuformData.row.spuId,skuId:a.addSkuformData.row.skuId,locationId:a.addSkuformData.row.locationId,containerNo:a.addSkuformData.row.containerNo}).then(()=>{y.success("\u6DFB\u52A0\u6210\u529F"),a.canDialogDetail=!1,a.addSkucanDialogDetail=!1,k()}).catch(()=>{y.error("\u64CD\u4F5C\u5931\u8D25")})}function Y(){ta({id:b.query.applyId}).then(i=>{a.applyInfo=i}).catch(i=>{console.log(i)})}return G(()=>{a.query.applyId=b.query.applyId,a.query.applyNo=b.query.applyNo,f(1),f(3),f(4),f(5),f(10),f(9),Y(),k()}),(i,e)=>{const s=d("el-table-column"),r=d("el-button"),V=d("el-table"),x=d("el-empty"),z=d("el-pagination"),J=d("el-card"),p=d("el-input"),u=d("el-col"),F=d("el-row"),C=d("el-dialog"),K=d("el-input-number"),T=d("el-form-item"),M=d("el-form"),L=Q("loading");return m(),X("div",null,[t(J,{header:"\u7533\u8BF7\u5355\u53F7 "+l(b).query.applyNo,shadow:"always","body-style":{padding:"0px"}},{default:n(()=>[l(a).tableData.rows.length>0?P((m(),c(V,{key:0,data:l(a).tableData.rows,stripe:"","cell-style":N,"header-cell-style":v,border:""},{default:n(()=>[t(s,{label:"#",prop:"id",width:"50"},{default:n(o=>[g("span",null,w(o.$index+1),1)]),_:1}),t(s,{label:"\u7269\u6599\u7F16\u53F7",prop:"skuNo",width:"140","show-overflow-tooltip":""}),t(s,{label:"\u7269\u6599\u540D\u79F0",prop:"skuName",width:"140","show-overflow-tooltip":""}),t(s,{label:"\u7533\u8BF7\u6570\u91CF",prop:"applyAmount",width:"100","show-overflow-tooltip":""}),t(s,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationNo",width:"120","show-overflow-tooltip":""}),t(s,{label:"\u6807\u7B7E\u53F7",prop:"containerNo",width:"120","show-overflow-tooltip":""}),t(s,{label:"\u9886\u7528\u65F6\u95F4",prop:"pickingTime",width:"100","show-overflow-tooltip":""}),t(s,{label:"\u5F52\u8FD8\u65F6\u95F4",prop:"returnTime",width:"100","show-overflow-tooltip":""}),t(s,{label:"\u72B6\u6001",prop:"status",width:"100","show-overflow-tooltip":""},{default:n(o=>[g("div",null,w(I(o.row.status,9)),1)]),_:1}),t(s,{label:"\u7533\u8BF7\u539F\u56E0",prop:"applyReason","show-overflow-tooltip":""}),t(s,{label:"\u64CD\u4F5C",width:"80"},{default:n(o=>[o.row.status==10?(m(),c(r,{key:0,type:"text",onClick:_=>B(o.$index,o.row),size:"mini"},{default:n(()=>[sa]),_:2},1032,["onClick"])):S("",!0)]),_:1})]),_:1},8,["data"])),[[L,l(a).tableData.loading]]):(m(),c(x,{key:1,description:"\u6682\u65E0\u6570\u636E"})),l(a).tableData.rows.length>0?(m(),c(z,{key:2,currentPage:l(a).tableData.pagination.pageNum,"onUpdate:currentPage":e[0]||(e[0]=o=>l(a).tableData.pagination.pageNum=o),"page-size":l(a).tableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:A,onSizeChange:U,"page-count":l(a).tableData.pagination.totalPage},null,8,["currentPage","page-size","page-count"])):S("",!0)]),_:1},8,["header"]),t(C,{title:"\u65B0\u589E\u7269\u54C1",modelValue:l(a).canDialogDetail,"onUpdate:modelValue":e[11]||(e[11]=o=>l(a).canDialogDetail=o),center:"",width:"60%"},{default:n(()=>[t(F,{gutter:20},{default:n(()=>[t(u,{span:4},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.seachField.locationNo,"onUpdate:modelValue":e[1]||(e[1]=o=>l(a).addSkuformData.seachField.locationNo=o),placeholder:"\u5E93\u4F4D\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(u,{span:4},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.seachField.locationName,"onUpdate:modelValue":e[2]||(e[2]=o=>l(a).addSkuformData.seachField.locationName=o),placeholder:"\u5E93\u4F4D\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(u,{span:4},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.seachField.containerNo,"onUpdate:modelValue":e[3]||(e[3]=o=>l(a).addSkuformData.seachField.containerNo=o),placeholder:"\u5BB9\u5668\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(u,{span:4},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.seachField.spuName,"onUpdate:modelValue":e[4]||(e[4]=o=>l(a).addSkuformData.seachField.spuName=o),placeholder:"\u4EA7\u54C1\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(u,{span:4},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.seachField.spuNo,"onUpdate:modelValue":e[5]||(e[5]=o=>l(a).addSkuformData.seachField.spuNo=o),placeholder:"\u4EA7\u54C1\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(u,{span:4},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.seachField.spuDescription,"onUpdate:modelValue":e[6]||(e[6]=o=>l(a).addSkuformData.seachField.spuDescription=o),placeholder:"\u4EA7\u54C1\u63CF\u8FF0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(u,{span:4},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.seachField.skuName,"onUpdate:modelValue":e[7]||(e[7]=o=>l(a).addSkuformData.seachField.skuName=o),placeholder:"\u7269\u6599\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(u,{span:4},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.seachField.skuDescription,"onUpdate:modelValue":e[8]||(e[8]=o=>l(a).addSkuformData.seachField.skuDescription=o),placeholder:"\u7269\u6599\u63CF\u8FF0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(u,{span:2},{default:n(()=>[t(r,{type:"primary",onClick:e[9]||(e[9]=o=>R()),size:"small"},{default:n(()=>[da]),_:1})]),_:1})]),_:1}),l(a).storageTableData.rows.length>0?P((m(),c(V,{key:0,data:l(a).storageTableData.rows,stripe:"","cell-style":N,"header-cell-style":v,border:"",class:"container_table"},{default:n(()=>[t(s,{label:"#",width:"50px"},{default:n(o=>[g("div",null,w(o.$index+1),1)]),_:1}),t(s,{label:"\u7269\u6599\u540D\u79F0",prop:"skuName",width:"240","show-overflow-tooltip":""}),t(s,{label:"\u7269\u6599\u7F16\u53F7",prop:"skuNo",width:"140","show-overflow-tooltip":""}),t(s,{label:"\u6807\u7B7E\u53F7",prop:"containerNo",width:"160","show-overflow-tooltip":""}),t(s,{label:"\u5E93\u5B58\u91CF",prop:"inventory",width:"80","show-overflow-tooltip":""}),t(s,{label:"\u9501\u5B9A\u5E93\u5B58\u91CF",prop:"lockInventory",width:"100","show-overflow-tooltip":""},{default:n(o=>[g("div",null,w(o.row.lockInventory?o.row.lockInventory:0),1)]),_:1}),t(s,{label:"\u5355\u4F4D",prop:"unit",width:"60","show-overflow-tooltip":""},{default:n(o=>[g("div",null,w(I(o.row.unit,3)),1)]),_:1}),t(s,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationNo",width:"120","show-overflow-tooltip":""}),t(s,{label:"\u64CD\u4F5C",width:"80px",fixed:"right"},{default:n(o=>[t(r,{type:"text",onClick:_=>j(o.$index,o.row),size:"mini"},{default:n(()=>[ra]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,l(a).storageTableData.loading]]):(m(),c(x,{key:1,description:"\u6682\u65E0\u6570\u636E"})),l(a).storageTableData.rows.length>0?(m(),c(z,{key:2,currentPage:l(a).storageTableData.pagination.pageNum,"onUpdate:currentPage":e[10]||(e[10]=o=>l(a).storageTableData.pagination.pageNum=o),"page-size":l(a).storageTableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:q,onSizeChange:$,"page-count":l(a).storageTableData.pagination.totalPage},null,8,["currentPage","page-size","page-count"])):S("",!0)]),_:1},8,["modelValue"]),t(C,{title:"\u6DFB\u52A0sku",modelValue:l(a).addSkucanDialogDetail,"onUpdate:modelValue":e[16]||(e[16]=o=>l(a).addSkucanDialogDetail=o),center:"",width:"30%"},{default:n(()=>[t(M,{ref:(o,_)=>{_.ruleForm=o},model:l(a).addSkuformData,rules:l(a).rules,size:"mini","label-width":"100px"},{default:n(()=>[t(T,{label:"\u9886\u7528\u6570\u91CF",prop:"count"},{default:n(()=>[t(K,{min:1,max:l(a).addSkuformData.row.inventory,modelValue:l(a).addSkuformData.count,"onUpdate:modelValue":e[12]||(e[12]=o=>l(a).addSkuformData.count=o)},null,8,["max","modelValue"])]),_:1}),t(T,{label:"\u539F\u56E0",prop:"reason"},{default:n(()=>[t(p,{modelValue:l(a).addSkuformData.reason,"onUpdate:modelValue":e[13]||(e[13]=o=>l(a).addSkuformData.reason=o)},null,8,["modelValue"])]),_:1}),g("span",ua,[t(r,{onClick:e[14]||(e[14]=o=>l(a).addSkucanDialogDetail=!1)},{default:n(()=>[pa]),_:1}),t(r,{type:"primary",onClick:e[15]||(e[15]=o=>E())},{default:n(()=>[ma]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),g("div",ca,[t(F,{gutter:20},{default:n(()=>[l(a).applyInfo.status==10?(m(),c(u,{key:0,span:4,offset:10},{default:n(()=>[t(r,{type:"success",onClick:e[17]||(e[17]=o=>H())},{default:n(()=>[ga]),_:1})]),_:1})):S("",!0)]),_:1})])])}}};var ha=ia(fa,[["__scopeId","data-v-71a435d7"]]);export{ha as default};
