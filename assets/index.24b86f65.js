import{h as J,Z as K,o as W,j as f,a4 as Z,k as y,l as w,x as t,y as i,a5 as l,w as G,O as s,J as p,B as n,W as I,U as F,s as g,q as _,E as S}from"./vendor.a22db959.js";import{_ as Q,L as X}from"./index.6b1aa83f.js";import{g as Y,a as ee,s as oe,b as ae}from"./index.d0f5265b.js";const le=_("\u641C\u7D22"),te=_("\u62A5\u5E9F"),ne={footer:"",class:"dialog_footer"},ie=_("\u53D6 \u6D88"),se=_("\u786E \u5B9A"),re={setup(ue){const k=X.get("JsonConfigs")||{};function d(r){return!k.storage||k.storage[r]==null?!0:Boolean(k.storage[r])}const e=J({scrapDialogDetail:!1,seachField:{locationNo:"",locationName:"",containerNo:"",spuName:"",spuNo:"",spuDescription:"",spuConsumeRule:"",skuName:"",skuDescription:"",status:""},tableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},formData:{applicant:window.localStorage.getItem("userId"),applyMemo:10,auditor:"",memo:"",row:{}},rules:{locationNo:[{required:!0,message:"\u8BF7\u8F93\u5165Sku\u7F16\u53F7",trigger:"blur"}],locationName:[{required:!0,message:"\u8BF7\u8F93\u5165Sku\u540D\u79F0",trigger:"blur"}]},applyMemoStatusList:[],userRoleList:[],strageStatusList:[]});K();function C(){ae({id:4}).then(r=>{console.log(r),r&&r.code==200?e.userRoleList=r.items||[]:S.success("\u52A0\u8F7D\u5BA1\u6838\u4EBA\u5217\u8868\u5931\u8D25")})}function L(r,a){e.formData.row={},e.scrapDialogDetail=!0,e.formData.row=a,C()}function U(){oe({containerId:parseInt(e.formData.row.containerId||0),containerNo:e.formData.row.containerNo,locationId:parseInt(e.formData.row.locationId||0),locationLayerNo:e.formData.row.locationLayerNo,spuId:parseInt(e.formData.row.spuId||0),skuId:parseInt(e.formData.row.skuId||0),applicant:parseInt(e.formData.applicant||0),auditor:parseInt(e.formData.auditor||0),applyMemo:e.formData.applyMemo,curAmount:parseInt(e.formData.row.inventory||0),lockAmount:parseInt(e.formData.row.lockInventory||0),memo:e.formData.memo}).then(r=>{r&&r.code==200?(S.success("\u64CD\u4F5C\u6210\u529F"),e.scrapDialogDetail=!1):S.success("\u64CD\u4F5C\u5931\u8D25")})}function M(r){e.tableData.pagination.pageSize=r,b()}function R(r){e.tableData.pagination.pageNum=r,b()}function B(){e.tableData.pagination.pageNum=1,b()}function b(){e.tableData.loading=!0,Y({locationNo:e.seachField.locationNo,locationName:e.seachField.locationName,containerNo:e.seachField.containerNo,spuName:e.seachField.spuName,spuNo:e.seachField.spuNo,spuDescription:e.seachField.spuDescription,spuConsumeRule:e.seachField.spuConsumeRule,skuName:e.seachField.skuName,skuDescription:e.seachField.skuDescription,status:e.seachField.status,pageSize:e.tableData.pagination.pageSize,pageNum:e.tableData.pagination.pageNum}).then(r=>{e.tableData.rows=r.items?r.items:[],e.tableData.pagination.totalPage=r.totalPage,e.tableData.loading=!1}).catch(r=>{console.log(r)})}function P(){return"padding:3px;"}function A(){return"padding:3px;"}function N(r,a){var m=[];switch(a){case 13:m=e.applyMemoStatusList;break;case 4:m=e.strageStatusList;break}for(let c=0;c<m.length;c++)if(r==m[c].itemId)return m[c].itemName;return""}function z(r){ee({groupId:r}).then(a=>{if(a.code==200&&a.items.length>0)switch(r){case 13:e.applyMemoStatusList=a.items;break;case 4:e.strageStatusList=a.items;break}}).catch(a=>{console.log(a)})}return W(()=>{b(),z(13),z(4)}),(r,a)=>{const m=f("el-input"),c=f("el-col"),h=f("el-option"),v=f("el-select"),D=f("el-button"),$=f("el-row"),u=f("el-table-column"),T=f("el-table"),j=f("el-empty"),q=f("el-pagination"),V=f("el-form-item"),E=f("el-form"),O=f("el-dialog"),H=Z("loading");return n(),y("div",null,[w("div",null,[t($,{gutter:20},{default:i(()=>[t(c,{span:4},{default:i(()=>[t(m,{modelValue:l(e).seachField.locationNo,"onUpdate:modelValue":a[0]||(a[0]=o=>l(e).seachField.locationNo=o),placeholder:"\u5E93\u4F4D\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(c,{span:4},{default:i(()=>[t(m,{modelValue:l(e).seachField.locationName,"onUpdate:modelValue":a[1]||(a[1]=o=>l(e).seachField.locationName=o),placeholder:"\u5E93\u4F4D\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(c,{span:4},{default:i(()=>[t(m,{modelValue:l(e).seachField.containerNo,"onUpdate:modelValue":a[2]||(a[2]=o=>l(e).seachField.containerNo=o),placeholder:"\u5BB9\u5668\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(c,{span:4},{default:i(()=>[t(m,{modelValue:l(e).seachField.spuName,"onUpdate:modelValue":a[3]||(a[3]=o=>l(e).seachField.spuName=o),placeholder:"\u4EA7\u54C1\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(c,{span:4},{default:i(()=>[t(m,{modelValue:l(e).seachField.spuNo,"onUpdate:modelValue":a[4]||(a[4]=o=>l(e).seachField.spuNo=o),placeholder:"\u4EA7\u54C1\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(c,{span:4},{default:i(()=>[t(m,{modelValue:l(e).seachField.spuDescription,"onUpdate:modelValue":a[5]||(a[5]=o=>l(e).seachField.spuDescription=o),placeholder:"\u4EA7\u54C1\u63CF\u8FF0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(c,{span:4},{default:i(()=>[t(m,{modelValue:l(e).seachField.skuName,"onUpdate:modelValue":a[6]||(a[6]=o=>l(e).seachField.skuName=o),placeholder:"\u7269\u6599\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(c,{span:4},{default:i(()=>[t(m,{modelValue:l(e).seachField.skuDescription,"onUpdate:modelValue":a[7]||(a[7]=o=>l(e).seachField.skuDescription=o),placeholder:"\u7269\u6599\u63CF\u8FF0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(c,{span:4},{default:i(()=>[t(v,{modelValue:l(e).seachField.status,"onUpdate:modelValue":a[8]||(a[8]=o=>l(e).seachField.status=o),placeholder:"\u5BB9\u5668\u7269\u54C1\u72B6\u6001",size:"small",clearable:""},{default:i(()=>[t(h,{label:"\u6240\u6709",value:"0"}),(n(!0),y(I,null,F(l(e).strageStatusList,o=>(n(),s(h,{label:o.itemName,value:o.itemId,key:o.spuId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{span:2},{default:i(()=>[t(D,{type:"primary",onClick:a[9]||(a[9]=o=>B()),size:"small"},{default:i(()=>[le]),_:1})]),_:1})]),_:1}),l(e).tableData.rows.length>0?G((n(),s(T,{key:0,data:l(e).tableData.rows,stripe:"","cell-style":P,"header-cell-style":A,border:"",class:"container_table"},{default:i(()=>[t(u,{label:"#"},{default:i(o=>[w("div",null,g(o.$index+1),1)]),_:1}),d("locationNo")?(n(),s(u,{key:0,label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationNo","show-overflow-tooltip":"",width:"140"})):p("",!0),d("locationName")?(n(),s(u,{key:1,label:"\u5E93\u4F4D\u540D\u79F0",prop:"locationName","show-overflow-tooltip":"",width:"120"})):p("",!0),d("locationDescription")?(n(),s(u,{key:2,label:"\u5E93\u4F4D\u63CF\u8FF0",prop:"locationDescription","show-overflow-tooltip":"",width:"120"})):p("",!0),d("locationType")?(n(),s(u,{key:3,label:"\u5E93\u4F4D\u7C7B\u578B",prop:"locationType","show-overflow-tooltip":"",width:"120"},{default:i(o=>[w("div",null,g(N(o.row.locationType,5)),1)]),_:1})):p("",!0),d("locationOwner")?(n(),s(u,{key:4,label:"\u5E93\u4F4D\u6240\u5C5E",prop:"locationOwner","show-overflow-tooltip":"",width:"120"})):p("",!0),d("locationFloor")?(n(),s(u,{key:5,label:"\u5C42\u53F7",prop:"locationFloor","show-overflow-tooltip":"",width:"120"})):p("",!0),d("locationBlockNumber")?(n(),s(u,{key:6,label:"\u697C\u53F7",prop:"locationBlockNumber","show-overflow-tooltip":"",width:"120"})):p("",!0),d("locationLayerNo")?(n(),s(u,{key:7,label:"\u5E93\u4F4D\u5BB9\u5668\u5C42\u53F7",prop:"locationLayerNo",width:"120","show-overflow-tooltip":""})):p("",!0),d("containerNo")?(n(),s(u,{key:8,label:"\u5BB9\u5668\u7F16\u53F7",prop:"containerNo","show-overflow-tooltip":"",width:"120"})):p("",!0),d("spuName")?(n(),s(u,{key:9,label:"\u4EA7\u54C1\u540D\u79F0",prop:"spuName","show-overflow-tooltip":"",width:"120"})):p("",!0),d("spuNo")?(n(),s(u,{key:10,label:"\u4EA7\u54C1\u7F16\u53F7",prop:"spuNo","show-overflow-tooltip":"",width:"120"})):p("",!0),d("spuDescription")?(n(),s(u,{key:11,label:"\u4EA7\u54C1\u63CF\u8FF0",prop:"spuDescription","show-overflow-tooltip":"",width:"120"})):p("",!0),d("spuConsumeRule")?(n(),s(u,{key:12,label:"\u4EA7\u54C1\u89C4\u5219",prop:"spuConsumeRule","show-overflow-tooltip":"",width:"120"})):p("",!0),d("skuId")?(n(),s(u,{key:13,label:"\u7269\u6599ID",prop:"skuId","show-overflow-tooltip":"",width:"120"})):p("",!0),d("skuNo")?(n(),s(u,{key:14,label:"\u7269\u6599\u7F16\u53F7",prop:"skuNo","show-overflow-tooltip":"",width:"120"})):p("",!0),d("skuName")?(n(),s(u,{key:15,label:"\u7269\u6599\u540D\u79F0",prop:"skuName","show-overflow-tooltip":"",width:"120"})):p("",!0),d("skuDescription")?(n(),s(u,{key:16,label:"\u7269\u6599\u63CF\u8FF0",prop:"skuDescription","show-overflow-tooltip":"",width:"120"})):p("",!0),d("unit")?(n(),s(u,{key:17,label:"\u8BA1\u91CF\u5355\u4F4D",prop:"unit",width:"120"},{default:i(o=>[w("div",null,g(N(o.row.unit,3)),1)]),_:1})):p("",!0),d("minInventory")?(n(),s(u,{key:18,label:"\u6700\u5C0F\u5E93\u5B58",prop:"minInventory","show-overflow-tooltip":"",width:"120"})):p("",!0),d("maxInventory")?(n(),s(u,{key:19,label:"\u6700\u5927\u5E93\u5B58",prop:"maxInventory","show-overflow-tooltip":"",width:"120"})):p("",!0),d("inventory")?(n(),s(u,{key:20,label:"\u5E93\u5B58\u91CF",prop:"inventory","show-overflow-tooltip":"",width:"120"},{default:i(o=>[w("div",null,g(o.row.inventory||0),1)]),_:1})):p("",!0),d("lockInventory")?(n(),s(u,{key:21,label:"\u9501\u5B9A\u5E93\u5B58",prop:"lockInventory","show-overflow-tooltip":"",width:"120"},{default:i(o=>[w("div",null,g(o.row.lockInventory||0),1)]),_:1})):p("",!0),d("status")?(n(),s(u,{key:22,label:"\u72B6\u6001",prop:"status",fixed:"right","show-overflow-tooltip":"",width:"80"},{default:i(o=>[w("div",null,g(N(o.row.status,4)),1)]),_:1})):p("",!0),d("operation")?(n(),s(u,{key:23,label:"\u64CD\u4F5C"},{default:i(o=>[t(D,{disabled:o.row.status!=20,type:"text",onClick:x=>L(o.$index,o.row),size:"mini"},{default:i(()=>[te]),_:2},1032,["disabled","onClick"])]),_:1})):p("",!0)]),_:1},8,["data"])),[[H,l(e).tableData.loading]]):(n(),s(j,{key:1,description:"\u6682\u65E0\u6570\u636E"})),l(e).tableData.rows.length>0?(n(),s(q,{key:2,currentPage:l(e).tableData.pagination.pageNum,"onUpdate:currentPage":a[10]||(a[10]=o=>l(e).tableData.pagination.pageNum=o),"page-size":l(e).tableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:R,onSizeChange:M,"page-count":l(e).tableData.pagination.totalPage},null,8,["currentPage","page-size","page-count"])):p("",!0)]),t(O,{title:"\u63D0\u4EA4\u62A5\u5E9F\u5355",modelValue:l(e).scrapDialogDetail,"onUpdate:modelValue":a[16]||(a[16]=o=>l(e).scrapDialogDetail=o),center:"",width:"30%"},{default:i(()=>[t(E,{ref:(o,x)=>{x.ruleForm2=o},model:l(e).formData,rules:l(e).rules,size:"mini","label-width":"100px"},{default:i(()=>[t(V,{label:"\u7533\u8BF7\u7C7B\u578B",prop:"applyMemo"},{default:i(()=>[t(v,{modelValue:l(e).formData.applyMemo,"onUpdate:modelValue":a[11]||(a[11]=o=>l(e).formData.applyMemo=o),placeholder:"\u7C7B\u578B",size:"small",clearable:""},{default:i(()=>[(n(!0),y(I,null,F(l(e).applyMemoStatusList,o=>(n(),s(h,{label:o.itemName,value:o.itemId,key:o.itemId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(V,{label:"\u5BA1\u6838\u4EBA",prop:"auditor"},{default:i(()=>[t(v,{modelValue:l(e).formData.auditor,"onUpdate:modelValue":a[12]||(a[12]=o=>l(e).formData.auditor=o),placeholder:"\u5BA1\u6838\u4EBA",size:"small"},{default:i(()=>[(n(!0),y(I,null,F(l(e).userRoleList,o=>(n(),s(h,{label:o.userName,value:o.id,key:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(V,{label:"\u63CF\u8FF0",prop:"memo"},{default:i(()=>[t(m,{modelValue:l(e).formData.memo,"onUpdate:modelValue":a[13]||(a[13]=o=>l(e).formData.memo=o)},null,8,["modelValue"])]),_:1}),w("span",ne,[t(D,{onClick:a[14]||(a[14]=o=>l(e).scrapDialogDetail=!1)},{default:i(()=>[ie]),_:1}),t(D,{type:"primary",onClick:a[15]||(a[15]=o=>U())},{default:i(()=>[se]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};var ce=Q(re,[["__scopeId","data-v-6ca9a3c6"]]);export{ce as default};
