import Q from"./addSku.e23da306.js";import{h as X,Z as ee,o as le,j as s,a4 as ae,k as c,l as _,x as t,y as u,a5 as o,w as te,O as f,J as oe,E as L,B as r,W as g,U as b,s as D,q as k,D as ue}from"./vendor.a22db959.js";import{k as ne,a as ie,f as re,c as se,l as de,m as pe,n as me}from"./index.70831d5c.js";import{_ as fe}from"./index.465eb10d.js";const ce=k("\u641C\u7D22"),ge=k("\u65B0\u589E"),be=k("\u4FEE\u6539"),_e={footer:"",class:"dialog_footer"},De=k("\u53D6 \u6D88"),ve=k("\u786E \u5B9A"),we={setup(ke){const{proxy:U}=ue(),l=X({drawer:!1,seachField:{skuName:"",skuNo:"",status:"",spuId:""},tableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},formData:{userId:parseInt(window.localStorage.getItem("userId")||""),sessionId:window.localStorage.getItem("sessionId")||"",spuId:"",skuId:"",skuNo:"",skuName:"",description:"",SkuConsumeRule:0,status:"",coperationId:"",moperationId:"",ctime:"",mtime:"",minInventory:0,maxInventory:0,currentSeqNo:0,requiredReturn:10,requiredApply:10,locationId:"",unit:0,unitPrice:0,useDevice:"",vendor:0,memo:""},rules:{skuNo:[{required:!0,message:"\u8BF7\u8F93\u5165Sku\u7F16\u53F7",trigger:"blur"}],skuName:[{required:!0,message:"\u8BF7\u8F93\u5165Sku\u540D\u79F0",trigger:"blur"}]},canDialogDetail:!1,statusList:[],UnitList:[],sysYesNoList:[],locationList:[],spuList:[],supplierList:[]});ee();function C(n){l.tableData.pagination.pageSize=n,V()}function F(n){l.tableData.pagination.pageNum=n,V()}function q(){l.tableData.pagination.pageNum=1,V()}function V(){l.tableData.loading=!0,ne({skuName:l.seachField.skuName,spuId:l.seachField.spuId,skuNo:l.seachField.skuNo,skuConsumeRule:l.seachField.skuConsumeRule,status:l.seachField.status,pageSize:l.tableData.pagination.pageSize,pageNum:l.tableData.pagination.pageNum}).then(n=>{l.tableData.rows=n.items?n.items:[],l.tableData.pagination.totalPage=n.totalPage,l.tableData.loading=!1}).catch(n=>{console.log(n)})}function P(){return"padding:3px;"}function A(){return"padding:3px;"}function R(n,a){l.formData.skuId&&U.$refs.ruleForm.resetFields(),pe({id:a.skuId}).then(i=>{l.formData=i.data,l.canDialogDetail=!0}).catch(i=>{console.log(i)})}function $(){U.$refs.ruleForm.validate().then(n=>{n&&me(l.formData).then(()=>{L.success("\u4FEE\u6539\u6210\u529F"),l.canDialogDetail=!1,V()}).catch(()=>{L.error("\u64CD\u4F5C\u5931\u8D25")})})}function j(n){V(),n()}function N(n,a){var i=[];switch(a){case 1:i=l.statusList;break;case 3:i=l.UnitList;break;case 10:i=l.sysYesNoList;break}for(let m=0;m<i.length;m++)if(n==i[m].itemId)return i[m].itemName;return""}function h(n){ie({groupId:n}).then(a=>{if(a.code==200&&a.items.length>0)switch(n){case 1:l.statusList=a.items;break;case 3:l.UnitList=a.items;break;case 10:l.sysYesNoList=a.items;break}}).catch(a=>{console.log(a)})}function B(){re({status:20}).then(n=>{n&&n.code&&n.items&&n.items.length>0&&(console.log("res",n.items),l.spuList=n.items)}).catch(n=>{L.error(n)})}function Y(){se({status:20,pageSize:1e3,pageNum:1}).then(n=>{l.locationList=n.items?n.items:[]}).catch(n=>{console.log(n)})}function E(){de({status:20,pageSize:1e3,pageNum:1}).then(n=>{l.supplierList=n.items?n.items:[]}).catch(n=>{console.log(n)})}function H(n){let a=l.supplierList.filter((i,m,v)=>i.id==n);return(a&&a.length)>0?a[0].supplierName:""}return le(()=>{Y(),V(),h(1),h(3),h(10),B(),E()}),(n,a)=>{const i=s("el-option"),m=s("el-select"),v=s("el-col"),w=s("el-input"),I=s("el-button"),M=s("el-row"),d=s("el-table-column"),T=s("el-table"),J=s("el-empty"),K=s("el-pagination"),p=s("el-form-item"),x=s("el-radio"),z=s("el-radio-group"),S=s("el-input-number"),O=s("el-form"),W=s("el-dialog"),Z=s("el-drawer"),G=ae("loading");return r(),c("div",null,[_("div",null,[t(M,{gutter:20},{default:u(()=>[t(v,{span:4},{default:u(()=>[t(m,{modelValue:o(l).seachField.spuId,"onUpdate:modelValue":a[0]||(a[0]=e=>o(l).seachField.spuId=e),placeholder:"SPU",size:"small",clearable:""},{default:u(()=>[t(i,{label:"\u6240\u6709",value:"0"}),(r(!0),c(g,null,b(o(l).spuList,e=>(r(),f(i,{label:e.spuName,value:e.spuId,key:e.spuId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,{span:4},{default:u(()=>[t(w,{modelValue:o(l).seachField.skuName,"onUpdate:modelValue":a[1]||(a[1]=e=>o(l).seachField.skuName=e),placeholder:"Sku\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(v,{span:4},{default:u(()=>[t(w,{modelValue:o(l).seachField.skuNo,"onUpdate:modelValue":a[2]||(a[2]=e=>o(l).seachField.skuNo=e),placeholder:"Sku\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),t(v,{span:4},{default:u(()=>[t(m,{modelValue:o(l).seachField.status,"onUpdate:modelValue":a[3]||(a[3]=e=>o(l).seachField.status=e),placeholder:"\u72B6\u6001",size:"small",clearable:""},{default:u(()=>[t(i,{label:"\u6240\u6709",value:"0"}),(r(!0),c(g,null,b(o(l).statusList,e=>(r(),f(i,{label:e.itemName,value:e.itemId,key:e.itemId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(v,{span:2},{default:u(()=>[t(I,{type:"primary",onClick:a[4]||(a[4]=e=>q()),size:"small"},{default:u(()=>[ce]),_:1})]),_:1}),t(v,{span:2},{default:u(()=>[t(I,{type:"primary",onClick:a[5]||(a[5]=e=>o(l).drawer=!0),size:"small"},{default:u(()=>[ge]),_:1})]),_:1})]),_:1}),o(l).tableData.rows.length>0?te((r(),f(T,{key:0,data:o(l).tableData.rows,stripe:"","cell-style":P,"header-cell-style":A,border:"",class:"container_table"},{default:u(()=>[t(d,{label:"#",width:"50"},{default:u(e=>[_("div",null,D(e.$index+1),1)]),_:1}),t(d,{label:"Sku\u7F16\u53F7",prop:"skuNo",width:"140","show-overflow-tooltip":""}),t(d,{label:"Sku\u540D\u79F0",prop:"skuName",width:"240","show-overflow-tooltip":""}),t(d,{label:"\u6700\u5C0F\u5E93\u5B58",prop:"minInventory",width:"100","show-overflow-tooltip":""}),t(d,{label:"\u6700\u5927\u5E93\u5B58",prop:"maxInventory",width:"100","show-overflow-tooltip":""}),t(d,{label:"\u8BA1\u91CF\u5355\u4F4D",prop:"unit",width:"100","show-overflow-tooltip":""},{default:u(e=>[_("div",null,D(N(e.row.unit,3)),1)]),_:1}),t(d,{label:"\u5355\u4EF7",prop:"unitPrice",width:"80","show-overflow-tooltip":""}),t(d,{label:"\u7ED1\u5B9A\u5E93\u4F4D",prop:"locationNo",width:"140","show-overflow-tooltip":""}),t(d,{label:"\u4F7F\u7528\u8BBE\u5907",prop:"useDevice",width:"100","show-overflow-tooltip":""}),t(d,{label:"\u4F9B\u5E94\u5546",prop:"vendor",width:"100","show-overflow-tooltip":""},{default:u(e=>[_("div",null,D(H(e.row.vendor)),1)]),_:1}),t(d,{label:"Sku\u63CF\u8FF0",prop:"description",width:"100","show-overflow-tooltip":""}),t(d,{label:"\u662F\u5426\u9700\u8981\u7533\u8BF7",prop:"requiredApply",width:"120","show-overflow-tooltip":""},{default:u(e=>[_("div",null,D(N(e.row.requiredApply,10)),1)]),_:1}),t(d,{label:"\u662F\u5426\u5F3A\u5236\u5F52\u8FD8",prop:"requiredReturn",width:"120","show-overflow-tooltip":""},{default:u(e=>[_("div",null,D(N(e.row.requiredReturn,10)),1)]),_:1}),t(d,{label:"\u5907\u6CE8",prop:"memo",width:"120","show-overflow-tooltip":""}),t(d,{label:"\u72B6\u6001",prop:"status","show-overflow-tooltip":"",fixed:"right"},{default:u(e=>[_("div",null,D(N(e.row.status,1)),1)]),_:1}),t(d,{label:"\u64CD\u4F5C",width:"120",fixed:"right"},{default:u(e=>[t(I,{type:"text",onClick:y=>R(e.$index,e.row),size:"mini"},{default:u(()=>[be]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,o(l).tableData.loading]]):(r(),f(J,{key:1,description:"\u6682\u65E0\u6570\u636E"})),o(l).tableData.rows.length>0?(r(),f(K,{key:2,currentPage:o(l).tableData.pagination.pageNum,"onUpdate:currentPage":a[6]||(a[6]=e=>o(l).tableData.pagination.pageNum=e),"page-size":o(l).tableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:F,onSizeChange:C,"page-count":o(l).tableData.pagination.totalPage},null,8,["currentPage","page-size","page-count"])):oe("",!0),t(W,{title:"\u4FEE\u6539SKU\u4FE1\u606F",modelValue:o(l).canDialogDetail,"onUpdate:modelValue":a[24]||(a[24]=e=>o(l).canDialogDetail=e),center:"",width:"30%"},{default:u(()=>[t(O,{ref:(e,y)=>{y.ruleForm=e},model:o(l).formData,rules:o(l).rules,size:"mini","label-width":"100px"},{default:u(()=>[t(p,{label:"SPU",prop:"spuId"},{default:u(()=>[t(m,{modelValue:o(l).formData.spuId,"onUpdate:modelValue":a[7]||(a[7]=e=>o(l).formData.spuId=e),placeholder:"SPU",size:"small",disabled:""},{default:u(()=>[(r(!0),c(g,null,b(o(l).spuList,e=>(r(),f(i,{label:e.spuName,value:e.spuId,key:e.itemId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"Sku\u7F16\u53F7",prop:"skuNo"},{default:u(()=>[t(w,{modelValue:o(l).formData.skuNo,"onUpdate:modelValue":a[8]||(a[8]=e=>o(l).formData.skuNo=e)},null,8,["modelValue"])]),_:1}),t(p,{label:"Sku\u540D\u79F0",prop:"skuName"},{default:u(()=>[t(w,{modelValue:o(l).formData.skuName,"onUpdate:modelValue":a[9]||(a[9]=e=>o(l).formData.skuName=e)},null,8,["modelValue"])]),_:1}),t(p,{label:"Sku\u63CF\u8FF0",prop:"description"},{default:u(()=>[t(w,{modelValue:o(l).formData.description,"onUpdate:modelValue":a[10]||(a[10]=e=>o(l).formData.description=e)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u8BA1\u91CF\u5355\u4F4D",prop:"unit"},{default:u(()=>[t(m,{modelValue:o(l).formData.unit,"onUpdate:modelValue":a[11]||(a[11]=e=>o(l).formData.unit=e),placeholder:"\u8BA1\u91CF\u5355\u4F4D",size:"small",clearable:""},{default:u(()=>[(r(!0),c(g,null,b(o(l).UnitList,e=>(r(),f(i,{label:e.itemName,value:e.itemId,key:e.itemId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationId"},{default:u(()=>[t(m,{modelValue:o(l).formData.locationId,"onUpdate:modelValue":a[12]||(a[12]=e=>o(l).formData.locationId=e),placeholder:"\u9009\u62E9\u5E93\u4F4D",filterable:"",clearable:""},{default:u(()=>[(r(!0),c(g,null,b(o(l).locationList,e=>(r(),f(i,{label:e.locationNo,value:e.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u72B6\u6001",prop:"status"},{default:u(()=>[t(m,{modelValue:o(l).formData.status,"onUpdate:modelValue":a[13]||(a[13]=e=>o(l).formData.status=e),placeholder:"\u72B6\u6001",size:"small"},{default:u(()=>[(r(!0),c(g,null,b(o(l).statusList,e=>(r(),f(i,{label:e.itemName,value:e.itemId,key:e.itemId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u662F\u5426\u9700\u8981\u7533\u8BF7",prop:"requiredApply"},{default:u(()=>[t(z,{modelValue:o(l).formData.requiredApply,"onUpdate:modelValue":a[14]||(a[14]=e=>o(l).formData.requiredApply=e)},{default:u(()=>[(r(!0),c(g,null,b(o(l).sysYesNoList,e=>(r(),f(x,{label:e.itemId},{default:u(()=>[k(D(e.itemName),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u662F\u5426\u5F3A\u5236\u5F52\u8FD8",prop:"requiredReturn"},{default:u(()=>[t(z,{modelValue:o(l).formData.requiredReturn,"onUpdate:modelValue":a[15]||(a[15]=e=>o(l).formData.requiredReturn=e)},{default:u(()=>[(r(!0),c(g,null,b(o(l).sysYesNoList,e=>(r(),f(x,{label:e.itemId},{default:u(()=>[k(D(e.itemName),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u6700\u5C0F\u5E93\u5B58",prop:"minInventory"},{default:u(()=>[t(S,{modelValue:o(l).formData.minInventory,"onUpdate:modelValue":a[16]||(a[16]=e=>o(l).formData.minInventory=e)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u6700\u5927\u5E93\u5B58",prop:"maxInventory"},{default:u(()=>[t(S,{modelValue:o(l).formData.maxInventory,"onUpdate:modelValue":a[17]||(a[17]=e=>o(l).formData.maxInventory=e)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u5355\u4EF7",prop:"unitPrice"},{default:u(()=>[t(S,{min:0,modelValue:o(l).formData.unitPrice,"onUpdate:modelValue":a[18]||(a[18]=e=>o(l).formData.unitPrice=e)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u4F7F\u7528\u8BBE\u5907",prop:"useDevice"},{default:u(()=>[t(w,{min:o(l).formData.useDevice,modelValue:o(l).formData.useDevice,"onUpdate:modelValue":a[19]||(a[19]=e=>o(l).formData.useDevice=e)},null,8,["min","modelValue"])]),_:1}),t(p,{label:"\u4F9B\u5E94\u5546",prop:"maxInventory"},{default:u(()=>[t(m,{modelValue:o(l).formData.vendor,"onUpdate:modelValue":a[20]||(a[20]=e=>o(l).formData.vendor=e),filterable:"",placeholder:"\u4F9B\u5E94\u5546\u5217\u8868",clearable:""},{default:u(()=>[(r(!0),c(g,null,b(o(l).supplierList,e=>(r(),f(i,{label:e.supplierName,value:e.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"\u5907\u6CE8",prop:"memo"},{default:u(()=>[t(w,{modelValue:o(l).formData.memo,"onUpdate:modelValue":a[21]||(a[21]=e=>o(l).formData.memo=e)},null,8,["modelValue"])]),_:1}),_("span",_e,[t(I,{onClick:a[22]||(a[22]=e=>o(l).canDialogDetail=!1)},{default:u(()=>[De]),_:1}),t(I,{type:"primary",onClick:a[23]||(a[23]=e=>$())},{default:u(()=>[ve]),_:1})])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])]),t(Z,{title:"\u65B0\u589E sku",modelValue:o(l).drawer,"onUpdate:modelValue":a[25]||(a[25]=e=>o(l).drawer=e),"destroy-on-close":!0,"custom-class":"drawer",ref:(e,y)=>{y.drawer=e},"close-on-press-escape":!0,"before-close":j},{default:u(()=>[t(Q)]),_:1},8,["modelValue"])])}}};var he=fe(we,[["__scopeId","data-v-54e708d0"]]);export{he as default};
