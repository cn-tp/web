import{h as j,Z as H,K as R,o as E,j as c,a4 as M,k as J,l as v,x as o,y as s,a5 as l,w as C,O as u,J as D,B as p,s as K,q as m,E as x}from"./vendor.a22db959.js";import{W as O,a as W,X,c as Y,Y as Z}from"./index.70831d5c.js";import{_ as G}from"./index.465eb10d.js";const Q=m("\u65B0\u589E"),aa=m("\u5220\u9664"),ea=m("\u641C\u7D22"),ta=m("\u6DFB\u52A0"),oa={setup(la){const a=j({query:{takeId:0},seachField:{status:10},tableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},locationTableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},formData:{applyName:"",auditor:0,expectReturnTime:"",memo:""},addLocationformData:{seachField:{locationNo:""}},rules:{locationNo:[{required:!0,message:"\u8BF7\u8F93\u5165SPU\u7F16\u53F7",trigger:"blur"}],locationName:[{required:!0,message:"\u8BF7\u8F93\u5165SPU\u540D\u79F0",trigger:"blur"}]},canDialogDetail:!1});H();const _=R();function T(e){a.tableData.pagination.pageSize=e,g()}function I(e){a.tableData.pagination.pageNum=e,g()}function P(e){a.locationTableData.pagination.pageSize=e,b()}function L(e){a.locationTableData.pagination.pageNum=e,b()}function g(){a.tableData.loading=!0,O({id:_.query.taskId,pageSize:a.tableData.pagination.pageSize,pageNum:a.tableData.pagination.pageNum}).then(e=>{a.tableData.rows=e.items?e.items:[],a.tableData.pagination.totalPage=e.totalPage,a.tableData.loading=!1}).catch(e=>{console.log(e)})}function f(){return"padding:3px;"}function h(){return"padding:3px;"}function V(e,t){X({takeId:parseInt(_.query.taskId||0),locationId:t.id,userId:parseInt(window.localStorage.getItem("userId")||""),sessionId:window.localStorage.getItem("sessionId")}).then(i=>{i&&i.code==200&&(a.canDialogDetail=!1,g())})}function w(){Y({pageSize:a.locationTableData.pagination.pageSize,pageNum:a.locationTableData.pagination.pageNum,locationNo:a.addLocationformData.seachField.locationNo}).then(e=>{e&&e.code==200&&(a.locationTableData.rows=e.items?e.items:[],a.locationTableData.pagination.totalPage=e.totalPage)})}function b(){a.canDialogDetail=!0,w()}function q(e,t){Z({id:t.id}).then(i=>{i&&i.code==200?x.success("\u5220\u9664\u6210\u529F"):x.error("\u5220\u9664\u5931\u8D25"),g()})}function A(e,t){var i=[];switch(t){case 17:i=a.statusList;break}for(let d=0;d<i.length;d++)if(e==i[d].itemId)return i[d].itemName;return""}function B(e){W({groupId:e}).then(t=>{if(t.code==200&&t.items.length>0)switch(e){case 17:a.statusList=t.items;break}}).catch(t=>{console.log(t)})}return E(()=>{g(),B(17)}),(e,t)=>{const i=c("el-button"),d=c("el-col"),k=c("el-row"),r=c("el-table-column"),N=c("el-table"),y=c("el-empty"),S=c("el-pagination"),F=c("el-input"),U=c("el-dialog"),z=M("loading");return p(),J("div",null,[v("div",null,[o(k,{gutter:20},{default:s(()=>[o(d,{span:2},{default:s(()=>[o(i,{type:"primary",onClick:t[0]||(t[0]=n=>b()),size:"small"},{default:s(()=>[Q]),_:1})]),_:1})]),_:1}),l(a).tableData.rows.length>0?C((p(),u(N,{key:0,data:l(a).tableData.rows,stripe:"","cell-style":f,"header-cell-style":h,border:"",class:"container_table"},{default:s(()=>[o(r,{label:"#",prop:"id",width:"50"}),o(r,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationNo",width:"160"}),o(r,{label:"\u5E93\u4F4D\u540D\u79F0",prop:"locationName",width:"160"}),o(r,{label:"\u5E94\u76D8\u6570",prop:"plannum",width:"100"}),o(r,{label:"\u5B9E\u76D8\u6570",prop:"realNum",width:"100"}),o(r,{label:"\u5DEE\u5F02\u6570",prop:"diffNum",width:"100"}),o(r,{label:"\u72B6\u6001",prop:"status",width:"100"},{default:s(n=>[v("div",null,K(A(n.row.status,17)),1)]),_:1}),o(r,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"ctime",width:"200"}),o(r,{label:"\u64CD\u4F5C",width:"240"},{default:s(n=>[n.row.status==10?(p(),u(i,{key:0,type:"text",onClick:$=>q(n.$index,n.row),size:"mini"},{default:s(()=>[aa]),_:2},1032,["onClick"])):D("",!0)]),_:1})]),_:1},8,["data"])),[[z,l(a).tableData.loading]]):(p(),u(y,{key:1,description:"\u6682\u65E0\u6570\u636E"})),l(a).tableData.rows.length>0?(p(),u(S,{key:2,currentPage:l(a).tableData.pagination.pageNum,"onUpdate:currentPage":t[1]||(t[1]=n=>l(a).tableData.pagination.pageNum=n),"page-size":l(a).tableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:I,onSizeChange:T,"page-count":l(a).tableData.pagination.totalPage},null,8,["currentPage","page-size","page-count"])):D("",!0),o(U,{title:"\u65B0\u589E\u76D8\u70B9\u5E93\u4F4D\u4EFB\u52A1",modelValue:l(a).canDialogDetail,"onUpdate:modelValue":t[5]||(t[5]=n=>l(a).canDialogDetail=n),center:"",width:"60%"},{default:s(()=>[o(k,{gutter:20},{default:s(()=>[o(d,{span:4},{default:s(()=>[o(F,{modelValue:l(a).addLocationformData.seachField.locationNo,"onUpdate:modelValue":t[2]||(t[2]=n=>l(a).addLocationformData.seachField.locationNo=n),placeholder:"\u5E93\u4F4D\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),o(d,{span:2},{default:s(()=>[o(i,{type:"primary",onClick:t[3]||(t[3]=n=>w()),size:"small"},{default:s(()=>[ea]),_:1})]),_:1})]),_:1}),l(a).locationTableData.rows.length>0?C((p(),u(N,{key:0,data:l(a).locationTableData.rows,stripe:"","cell-style":f,"header-cell-style":h,border:"",class:"container_table"},{default:s(()=>[o(r,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationNo"}),o(r,{label:"\u697C\u53F7",prop:"locationBlockNumber"}),o(r,{label:"\u5C42\u53F7",prop:"locationFloor"}),o(r,{label:"\u64CD\u4F5C"},{default:s(n=>[o(i,{type:"text",onClick:$=>V(n.$index,n.row),size:"mini"},{default:s(()=>[ta]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[z,l(a).locationTableData.loading]]):(p(),u(y,{key:1,description:"\u6682\u65E0\u6570\u636E"})),l(a).locationTableData.rows.length>0?(p(),u(S,{key:2,currentPage:l(a).locationTableData.pagination.pageNum,"onUpdate:currentPage":t[4]||(t[4]=n=>l(a).locationTableData.pagination.pageNum=n),"page-size":l(a).locationTableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:L,onSizeChange:P,"page-count":l(a).locationTableData.pagination.totalPage},null,8,["currentPage","page-size","page-count"])):D("",!0)]),_:1},8,["modelValue"])])])}}};var ra=G(oa,[["__scopeId","data-v-34f029a0"]]);export{ra as default};
