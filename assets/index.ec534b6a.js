import{h as ae,K as ie,o as ne,j as d,a4 as se,k as P,x as l,y as i,a5 as a,l as m,B as r,w as U,O as c,s as k,J as _,W as ue,U as de,q as p,z as re,A as pe,E as v}from"./vendor.a22db959.js";import{x as me,q as ce,a as ge,c as fe,k as ke,y as _e,z as be,A as ve}from"./index.d0f5265b.js";import{p as he}from"./printer.c1ec2af2.js";import{_ as we,L as De}from"./index.6b1aa83f.js";const $=h=>(re("data-v-738fdbfd"),h=h(),pe(),h),Ie=p("\u5220\u9664"),Ne=p("\u6253\u5370"),Fe=p("\u641C\u7D22"),ye=p("\u9009\u62E9"),xe={style:{"font-size":"10px"}},Ve={footer:"",class:"dialog_footer"},Ce=p("\u53D6 \u6D88"),Se=p("\u4FDD\u5B58"),Te=$(()=>m("span",null,"\u786E\u5B9A\u5220\u9664\u8BE5\u7269\u6599 ?",-1)),ze={footer:"",class:"dialog_footer"},Ae=p("\u53D6 \u6D88"),Re=p("\u5220\u9664"),Le=$(()=>m("span",null,"\u786E\u5B9A\u63D0\u4EA4\u8D26\u5355 ?",-1)),Pe={footer:"",class:"dialog_footer"},Ue=p("\u53D6 \u6D88"),$e=p("\u786E\u5B9A"),je={style:{"margin-top":"10px"}},qe=p("\u65B0\u589E"),Be=p("\u63D0\u4EA4\u8D26\u5355"),Ee={setup(h){const y=De.get("JsonConfigs")||{};function j(n){return!y.storage||y.storage[n]==null?!0:Boolean(y.storage[n])}const e=ae({tableData:{loading:!1,pagination:{pageSize:100,pageNum:1,totalPage:0,more:0},rows:[]},skuForm:{spuId:"",skuName:"",skuId:"",skuNo:"",locationId:"",locationNo:"",expectReceiveAmount:1,containerNo:"",unit:"",max:1,unitPrice:0,useDevice:"",vendor:0,memo:""},seachField:{skuName:"",skuNo:"",status:"",spuId:""},skuTableData:{loading:!1,pagination:{pageSize:10,pageNum:1,totalPage:0,more:0},rows:[]},unitList:[],detailStatusList:[],canDialogDetail:!1,receivingInfo:{receiveId:"",receiveNo:"",receiveName:"",receivePriority:0,memo:"",status:0,receiveTime:""},showFormDialog:!1,locationList:[],deleteConfirmDialog:!1,deleteDetailId:0,submitDialog:!1}),w=ie();function q(n){e.skuTableData.pagination.pageSize=n,I()}function B(n){e.skuTableData.pagination.pageNum=n,I()}function D(){e.tableData.loading=!0,me({receiveId:w.query.receiveId}).then(n=>{e.tableData.rows=n.items?n.items:[],e.tableData.loading=!1}).catch(n=>{console.log(n)})}function V(){ce({id:w.query.receiveId}).then(n=>{e.receivingInfo=n}).catch(n=>{console.log(n)})}function C(){return"padding:3px;"}function S(){return"padding:3px;"}function E(){e.canDialogDetail=!0,I()}function O(){e.skuTableData.pagination.pageNum=1,I()}function I(){e.skuTableData.loading=!0,ke({pageSize:e.skuTableData.pagination.pageSize,pageNum:e.skuTableData.pagination.pageNum,skuName:e.seachField.skuName,skuNo:e.seachField.skuNo,status:20}).then(n=>{e.skuTableData.rows=n.items?n.items:[],e.skuTableData.pagination.totalPage=n.totalPage,e.skuTableData.loading=!1}).catch(n=>{console.log(n)})}function H(){e.submitDialog=!0}function J(){_e({userId:parseInt(window.localStorage.getItem("userId")||""),sessionId:window.localStorage.getItem("sessionId"),id:w.query.receiveId}).then(()=>{v.success("\u63D0\u4EA4\u6210\u529F "),V(),D(),e.submitDialog=!1}).catch(n=>{console.log(n)})}function K(n,o){e.deleteConfirmDialog=!0,e.deleteDetailId=o.id}function M(){be({id:e.deleteDetailId}).then(()=>{v.success("\u5220\u9664\u6210\u529F"),e.deleteConfirmDialog=!1,D()}).catch(n=>{console.log(n)})}function x(n,o){var s=[];switch(o){case 3:s=e.unitList;break;case 11:s=e.detailStatusList;break}for(let u=0;u<s.length;u++)if(n==s[u].itemId)return s[u].itemName;return""}function T(n){ge({groupId:n}).then(o=>{if(o.code==200&&o.items&&o.items.length>0)switch(n){case 3:e.unitList=o.items;break;case 11:e.detailStatusList=o.items;break}}).catch(o=>{console.log(o)})}function W(n,o){console.log(o),Object.keys(e.skuForm).forEach(s=>{e.skuForm[s]=""}),e.showFormDialog=!0,e.skuForm.spuId=o.spuId,e.skuForm.skuId=o.skuId,e.skuForm.skuName=o.skuName,e.skuForm.skuNo=o.skuNo,e.skuForm.unit=o.unit,e.skuForm.expectReceiveAmount=1,e.skuForm.max=o.spuConsumeRule==10?1:o.Specification,e.skuForm.unitPrice=o.unitPrice,e.skuForm.useDevice=o.useDevice,e.skuForm.vendor=o.vendor,e.skuForm.memo=o.memo,e.skuForm.locationId=o.locationId}function G(){ve({userId:parseInt(window.localStorage.getItem("userId")||""),sessionId:window.localStorage.getItem("sessionId"),receiveId:parseInt(w.query.receiveId),spuId:e.skuForm.spuId,skuId:e.skuForm.skuId,locationId:e.skuForm.locationId,expectReceiveAmount:e.skuForm.expectReceiveAmount,containerNo:e.skuForm.containerNo}).then(n=>{v.success("\u6DFB\u52A0\u7269\u6599\u6210\u529F \uFF01"),D(),e.showFormDialog=!1}).catch(n=>{console.log(n)})}function Q(){fe({status:e.seachField.status,pageSize:1e3,pageNum:1}).then(n=>{e.locationList=n.items?n.items:[]}).catch(n=>{console.log(n)})}function X(n,o){if(!(o.containerNo&&o.skuNo)){v.warning("\u6807\u7B7E\u53F7\u672A\u586B\u5199\uFF0C\u53D6\u6D88\u6253\u5370");return}he({templateId:1,params:{containerNo:o.containerNo,skuNo:o.skuNo}}).then(s=>{v.success("\u5DF2\u53D1\u9001\u6253\u5370")}).catch(s=>{console.log(s)})}return ne(()=>{T(3),T(11),Q(),D(),V()}),(n,o)=>{const s=d("el-table-column"),u=d("el-button"),z=d("el-table"),A=d("el-empty"),Y=d("el-card"),f=d("el-input"),b=d("el-col"),R=d("el-row"),Z=d("el-pagination"),g=d("el-form-item"),ee=d("el-input-number"),oe=d("el-option"),te=d("el-select"),le=d("el-form"),N=d("el-dialog"),L=se("loading");return r(),P("div",null,[l(Y,{header:"\u6536\u6599\u5355\u53F7  "+a(e).receivingInfo.receiveNo,shadow:"always","body-style":{padding:"0px"}},{default:i(()=>[a(e).tableData.rows.length>0?U((r(),c(z,{key:0,data:a(e).tableData.rows,stripe:"","cell-style":C,"header-cell-style":S,border:""},{default:i(()=>[l(s,{label:"#",prop:"id",width:"50"},{default:i(t=>[m("span",null,k(t.$index+1),1)]),_:1}),l(s,{label:"\u72B6\u6001",prop:"status",width:"80"},{default:i(t=>[m("div",null,k(x(t.row.status,11)),1)]),_:1}),l(s,{label:"\u7269\u6599\u53F7",prop:"skuNo",width:"120","show-overflow-tooltip":""}),l(s,{label:"\u6807\u7B7E\u53F7",prop:"containerNo",width:"120","show-overflow-tooltip":""}),l(s,{label:"\u7269\u6599\u540D\u79F0",prop:"skuName",width:"100","show-overflow-tooltip":""}),l(s,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationNo",width:"100","show-overflow-tooltip":""}),l(s,{label:"\u6700\u5C0F\u5E93\u5B58",prop:"minInventory",width:"90","show-overflow-tooltip":""}),l(s,{label:"\u6700\u5927\u5E93\u5B58",prop:"maxInventory",width:"90","show-overflow-tooltip":""}),l(s,{label:"\u5355\u4EF7",prop:"unitPrice",width:"80","show-overflow-tooltip":""}),l(s,{label:"\u4F7F\u7528\u8BBE\u5907",prop:"useDevice",width:"100","show-overflow-tooltip":""}),l(s,{label:"\u8BA1\u5212\u5165\u5E93\u6570\u91CF",prop:"expectReceiveAmount",width:"120","show-overflow-tooltip":""}),l(s,{label:"\u5B9E\u9645\u5165\u5E93\u6570\u91CF",prop:"realReceiveAmount",width:"120","show-overflow-tooltip":""}),l(s,{label:"\u64CD\u4F5C",width:"80",fixed:"right"},{default:i(t=>[t.row.status==10?(r(),c(u,{key:0,type:"text",onClick:F=>K(t.$index,t.row),size:"mini"},{default:i(()=>[Ie]),_:2},1032,["onClick"])):_("",!0)]),_:1}),j("printer")?(r(),c(s,{key:0,label:"\u6807\u7B7E",width:"60",fixed:"right"},{default:i(t=>[t.row.status==10||t.row.status==20?(r(),c(u,{key:0,type:"text",onClick:F=>X(t.$index,t.row),size:"mini"},{default:i(()=>[Ne]),_:2},1032,["onClick"])):_("",!0)]),_:1})):_("",!0)]),_:1},8,["data"])),[[L,a(e).tableData.loading]]):(r(),c(A,{key:1,description:"\u6682\u65E0\u6570\u636E"}))]),_:1},8,["header"]),l(N,{title:"\u6DFB\u52A0\u7269\u6599",modelValue:a(e).canDialogDetail,"onUpdate:modelValue":o[16]||(o[16]=t=>a(e).canDialogDetail=t),center:"",width:"60%"},{default:i(()=>[l(R,{gutter:20},{default:i(()=>[l(b,{span:4},{default:i(()=>[l(f,{modelValue:a(e).seachField.skuName,"onUpdate:modelValue":o[0]||(o[0]=t=>a(e).seachField.skuName=t),placeholder:"Sku\u540D\u79F0",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),l(b,{span:4},{default:i(()=>[l(f,{modelValue:a(e).seachField.skuNo,"onUpdate:modelValue":o[1]||(o[1]=t=>a(e).seachField.skuNo=t),placeholder:"Sku\u7F16\u53F7",size:"small",clearable:!0},null,8,["modelValue"])]),_:1}),l(b,{span:2},{default:i(()=>[l(u,{type:"primary",onClick:o[2]||(o[2]=t=>O()),size:"small"},{default:i(()=>[Fe]),_:1})]),_:1})]),_:1}),a(e).skuTableData.rows.length>0?U((r(),c(z,{key:0,data:a(e).skuTableData.rows,stripe:"","cell-style":C,"header-cell-style":S,border:"",class:"container_table"},{default:i(()=>[l(s,{label:"#",width:"50"},{default:i(t=>[m("div",null,k(t.$index+1),1)]),_:1}),l(s,{label:"Sku\u7F16\u53F7",prop:"skuNo",width:"120","show-overflow-tooltip":""}),l(s,{label:"Sku\u540D\u79F0",prop:"skuName","show-overflow-tooltip":""}),l(s,{label:"\u6700\u5C0F\u5E93\u5B58",prop:"minInventory",width:"90","show-overflow-tooltip":""}),l(s,{label:"\u6700\u5927\u5E93\u5B58",prop:"maxInventory",width:"90","show-overflow-tooltip":""}),l(s,{label:"\u5355\u4F4D",prop:"unit",width:"60"},{default:i(t=>[m("div",null,k(x(t.row.unit,3)),1)]),_:1}),l(s,{label:"\u5355\u4EF7",prop:"unitPrice",width:"80","show-overflow-tooltip":""}),l(s,{label:"\u7ED1\u5B9A\u5E93\u4F4D",prop:"locationNo",width:"120","show-overflow-tooltip":""}),l(s,{label:"\u64CD\u4F5C",width:"80",fixed:"right"},{default:i(t=>[l(u,{type:"text",onClick:F=>W(t.$index,t.row),size:"mini"},{default:i(()=>[ye]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,a(e).skuTableData.loading]]):(r(),c(A,{key:1,description:"\u6682\u65E0\u6570\u636E"})),a(e).skuTableData.rows.length>0?(r(),c(Z,{key:2,currentPage:a(e).skuTableData.pagination.pageNum,"onUpdate:currentPage":o[3]||(o[3]=t=>a(e).skuTableData.pagination.pageNum=t),"page-size":a(e).skuTableData.pagination.pageSize,layout:"prev, pager, next",onCurrentChange:B,onSizeChange:q,"page-count":a(e).skuTableData.pagination.totalPage,total:a(e).skuTableData.pagination.more},null,8,["currentPage","page-size","page-count","total"])):_("",!0),l(N,{title:"\u586B\u5199\u7269\u6599\u4FE1\u606F",modelValue:a(e).showFormDialog,"onUpdate:modelValue":o[15]||(o[15]=t=>a(e).showFormDialog=t),center:"",width:"30%"},{default:i(()=>[l(le,{ref:(t,F)=>{F.skuForm=t},model:a(e).skuForm,size:"mini","label-width":"100px"},{default:i(()=>[l(g,{label:"\u7269\u6599\u53F7",prop:"skuNo"},{default:i(()=>[l(f,{modelValue:a(e).skuForm.skuNo,"onUpdate:modelValue":o[4]||(o[4]=t=>a(e).skuForm.skuNo=t),placeholder:"",disabled:""},null,8,["modelValue"])]),_:1}),l(g,{label:"\u7269\u6599\u540D\u79F0",prop:"skuName"},{default:i(()=>[l(f,{modelValue:a(e).skuForm.skuName,"onUpdate:modelValue":o[5]||(o[5]=t=>a(e).skuForm.skuName=t),placeholder:"",disabled:""},null,8,["modelValue"])]),_:1}),l(g,{label:"\u8BA1\u5212\u5165\u5E93\u6570\u91CF",prop:"expectReceiveAmount"},{default:i(()=>[l(ee,{modelValue:a(e).skuForm.expectReceiveAmount,"onUpdate:modelValue":o[6]||(o[6]=t=>a(e).skuForm.expectReceiveAmount=t),min:1,max:a(e).skuForm.max,"controls-position":"right"},null,8,["modelValue","max"])]),_:1}),l(g,{label:"",prop:"unit"},{default:i(()=>[m("span",xe,"( \u8BA1\u91CF\u5355\u4F4D: "+k(x(a(e).skuForm.unit,3))+" | \u89C4\u683C: "+k(a(e).skuForm.max?a(e).skuForm.max:"\u65E0")+" )",1)]),_:1}),l(g,{label:"\u5355\u4EF7",prop:"unitPrice"},{default:i(()=>[l(f,{modelValue:a(e).skuForm.unitPrice,"onUpdate:modelValue":o[7]||(o[7]=t=>a(e).skuForm.unitPrice=t),placeholder:"",disabled:""},null,8,["modelValue"])]),_:1}),l(g,{label:"\u4F7F\u7528\u8BBE\u5907",prop:"useDevice"},{default:i(()=>[l(f,{modelValue:a(e).skuForm.useDevice,"onUpdate:modelValue":o[8]||(o[8]=t=>a(e).skuForm.useDevice=t),placeholder:"",disabled:""},null,8,["modelValue"])]),_:1}),l(g,{label:"\u4F9B\u5E94\u5546",prop:"vendor"},{default:i(()=>[l(f,{modelValue:a(e).skuForm.vendor,"onUpdate:modelValue":o[9]||(o[9]=t=>a(e).skuForm.vendor=t),placeholder:"",disabled:""},null,8,["modelValue"])]),_:1}),l(g,{label:"\u7269\u6599\u5907\u6CE8",prop:"memo"},{default:i(()=>[l(f,{modelValue:a(e).skuForm.memo,"onUpdate:modelValue":o[10]||(o[10]=t=>a(e).skuForm.memo=t),placeholder:"",disabled:""},null,8,["modelValue"])]),_:1}),l(g,{label:"\u5E93\u4F4D\u7F16\u53F7",prop:"locationId"},{default:i(()=>[l(te,{modelValue:a(e).skuForm.locationId,"onUpdate:modelValue":o[11]||(o[11]=t=>a(e).skuForm.locationId=t),placeholder:"\u9009\u62E9\u5E93\u4F4D",filterable:"",clearable:""},{default:i(()=>[(r(!0),P(ue,null,de(a(e).locationList,t=>(r(),c(oe,{label:t.locationNo,value:t.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(g,{label:"\u6807\u7B7E\u53F7",prop:"containerNo"},{default:i(()=>[l(f,{modelValue:a(e).skuForm.containerNo,"onUpdate:modelValue":o[12]||(o[12]=t=>a(e).skuForm.containerNo=t),placeholder:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),m("span",Ve,[l(u,{onClick:o[13]||(o[13]=t=>a(e).showFormDialog=!1)},{default:i(()=>[Ce]),_:1}),l(u,{type:"primary",onClick:o[14]||(o[14]=t=>G())},{default:i(()=>[Se]),_:1})])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),l(N,{title:"\u63D0\u793A",modelValue:a(e).deleteConfirmDialog,"onUpdate:modelValue":o[19]||(o[19]=t=>a(e).deleteConfirmDialog=t),center:"",width:"30%"},{default:i(()=>[Te,m("span",ze,[l(u,{onClick:o[17]||(o[17]=t=>a(e).deleteConfirmDialog=!1)},{default:i(()=>[Ae]),_:1}),l(u,{type:"danger",onClick:o[18]||(o[18]=t=>M())},{default:i(()=>[Re]),_:1})])]),_:1},8,["modelValue"]),l(N,{title:"\u63D0\u793A",modelValue:a(e).submitDialog,"onUpdate:modelValue":o[22]||(o[22]=t=>a(e).submitDialog=t),center:"",width:"30%"},{default:i(()=>[Le,m("span",Pe,[l(u,{onClick:o[20]||(o[20]=t=>a(e).submitDialog=!1)},{default:i(()=>[Ue]),_:1}),l(u,{type:"danger",onClick:o[21]||(o[21]=t=>J())},{default:i(()=>[$e]),_:1})])]),_:1},8,["modelValue"]),m("div",je,[l(R,{gutter:20},{default:i(()=>[a(e).receivingInfo.status==10?(r(),c(b,{key:0,span:4,offset:10},{default:i(()=>[l(u,{type:"success",onClick:o[23]||(o[23]=t=>E())},{default:i(()=>[qe]),_:1})]),_:1})):_("",!0),a(e).receivingInfo.status==10?(r(),c(b,{key:1,span:4,offset:6},{default:i(()=>[l(u,{type:"primary",onClick:o[24]||(o[24]=t=>H())},{default:i(()=>[Be]),_:1})]),_:1})):_("",!0)]),_:1})])])}}};var Me=we(Ee,[["__scopeId","data-v-738fdbfd"]]);export{Me as default};
